# Spatial Visualisations
# Matching
# Jan-Philipp Kolb
# Tue Oct 13 08:30:11 2015


## ----echo=F--------------------------------------------------------------
data.path <- "J:/Work/Statistik/Kolb/Workshops/2015/Spatial_MA/Folien/dataImport/data"

## ------------------------------------------------------------------------
library(maptools)
data("wrld_simpl")

## ------------------------------------------------------------------------
df_ws <- data.frame(wrld_simpl@data)

## ------------------------------------------------------------------------
CNames <- wrld_simpl@data$NAME
head(CNames)

## ------------------------------------------------------------------------
CNames <- as.character(CNames)
head(CNames)

## ------------------------------------------------------------------------
CNames1 <- substr(CNames,1,1)
head(CNames1)

## ------------------------------------------------------------------------
CNames2 <- substr(CNames,1,2)
head(CNames2)

## ------------------------------------------------------------------------
CNames[CNames2=="An"]

## ----echo=F--------------------------------------------------------------
setwd(data.path)

library(xlsx)
HHsr <- read.xlsx2("HHsavingRate.xls",1)

## ------------------------------------------------------------------------
A <- c(1,2,3,4)
B <- c(4,3)
match(A,B)

## ------------------------------------------------------------------------
match(B,A)

## ------------------------------------------------------------------------
D <- c(1,3,5,6,7)
E <- c("A",1,98,4)
match(D,E)

## ------------------------------------------------------------------------
EUR <- wrld_simpl[wrld_simpl$REGION==150,]
plot(EUR)

## ------------------------------------------------------------------------
EUR <- EUR[-which(EUR@data$NAME=="Russia"),]
plot(EUR)

## ------------------------------------------------------------------------
as.character(HHsr[5:10,1])

## ------------------------------------------------------------------------
EUR_Names <- as.character(EUR@data$NAME)
head(EUR_Names)

## ------------------------------------------------------------------------
ind <- match(EUR_Names,HHsr[,1])
head(ind)
table(is.na(ind))

## ------------------------------------------------------------------------
EUR@data$HHsr <- as.numeric(as.character(HHsr[ind,2]))

## ------------------------------------------------------------------------
# Plot the map:
library(sp)
spplot(EUR,"HHsr")

