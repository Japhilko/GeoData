---
title: "The Usage of APIs"
author: "Jan-Philipp Kolb"
date: "Mon Feb 29 08:36:33 2016"
output: html_document
---

```{r,echo=F}
Ex=F
```



## The Overpass API

![Overpass API](http://wiki.openstreetmap.org/w/images/thumb/b/b5/Overpass_API_logo.svg/400px-Overpass_API_logo.svg.png)

>The Overpass API is a read-only API that serves up custom selected parts of the OSM map data. ([Source](http://wiki.openstreetmap.org/wiki/Overpass_API))

## Important Information

[OSM map features](http://wiki.openstreetmap.org/wiki/Map_Features)

![osm map features](https://www.mapbox.com/help/img/3rdparty/overpass-osm-disney.png)


## Example: Usage Overpass API

![playground Mannheim](https://raw.githubusercontent.com/Japhilko/GeoData/master/data/figure/BSPoverpassMannheim.PNG)

![Export Raw data](https://raw.githubusercontent.com/Japhilko/GeoData/master/data/figure/OverpassExportRohdaten.PNG)

## Import from Overpass API to R

```{r,eval=Ex}
Link1 <- "http://www.overpass-api.de/api/interpreter?data=[maxsize:1073741824][timeout:900];area[name=\""
place <- "Mannheim"
type_obj <- "node"
object <- "leisure=playground"

InfoList <- xmlParse(paste(Link1,place,"\"];",
                           type_obj,"(area)[",object,"];out;",sep=""))
```


## Work with XML data (xpath)

The list of ID's with value playground:

```{r,eval=Ex}
node_id<- xpathApply(InfoList,"//tag[@v= 'playground']/parent::node/@ id")
```

## Get latitude and longitude

```{r,eval=Ex}
lat_x <- xpathApply(InfoList,"//tag[@v= 'playground']/parent::node/@ lat")
```

```{r,eval=Ex}
lat_x <- xpathApply(InfoList,"//tag[@v= 'playground']/parent::node/@ lon")
```
