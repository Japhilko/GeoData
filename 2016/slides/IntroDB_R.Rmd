---
title: "Intro in Using Databases with R"
author: "Jan-Philipp Kolb"
date: "Tue Mar 01 08:38:40 2016"
output: html_document
---

## [Getting Started](https://datashenanigan.wordpress.com/2015/05/18/getting-started-with-postgresql-in-r/)

PostgreSQL has the advantage of being open source 

- [Download PostreSQL](http://www.postgresql.org/download/windows/)
- Start pgAdmin III
- To connect to the database double click on the server in pgAdmin III

- [Set up a new user](https://doc.odoo.com/install/windows/postgres/)

## Connect with R

- create a connection
- save the password that we can "hide" it as best as we can by collapsing it


```{r,eval=F}
library("RPostgreSQL")

pw <- {
  "new_user_password"
}
 
# loads the PostgreSQL driver
drv <- dbDriver("PostgreSQL")
# creates a connection to the postgres database
# note that "con" will be used later in each connection to the database
con <- dbConnect(drv, dbname = "OSMdata",
                 host = "localhost", port = 5432,
                 user = "postgres", password = pw)
rm(pw) # removes the password
```

## Use OpenStreetMap data

```{r,eval=F}
generator <- read.csv("https://raw.githubusercontent.com/Japhilko/GeoData/master/data/Deutschland_generator.csv")
colnames(generator)[5] <- "source"
```


## Write and Load

write to database:

```{r,eval=F}
dbWriteTable(con,name='generator',value=generator, row.names=FALSE)
```

query the data from postgreSQL 

```{r,eval=F}
df_postgres <- dbGetQuery(con, "SELECT * from generator")
```

## [Append to existing table](http://www.r-bloggers.com/r-and-postgresql-using-rpostgresql-and-sqldf/)

```{r,eval=F}
dbWriteTable(con, c("generator"), value=generator,append=TRUE, row.names=FALSE)
```



## Disconnect from the database

```{r,eval=F}
dbDisconnect(con)
```


## Links

[A quick how to](http://www.win-vector.com/blog/2016/02/using-postgresql-in-r/)