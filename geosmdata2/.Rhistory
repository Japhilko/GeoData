# Paths
#---------------------------------------#
path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/data"
r.path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/Rcode/rcodePaper"
#---------------------------------------#
# Read data
#---------------------------------------#
setwd(path)
load("ALLBUSweights.RData")
#---------------------------------------#
# Read functions
#---------------------------------------#
setwd(r.path)
source("WeightALL_B_functions.R")
source("WeightALL_B1_sighat.R")
#---------------------------------------#
# Choose one variable
#---------------------------------------#
Descr <- c("Abitur","Alter","Bundesland","1=deutsch; 0 sonst","AUSLAENDER: MEHR LEBENSSTILANPASSUNG 0,...,7",
"AUSLAENDER: SOLLTEN UNTER SICH HEIRATEN  0,...,7","ALLGEMEINER SCHULABSCHLUSS 1,...,7")
Variablen <- c("abitur","v301","v975","deutsch","v318","v321","v327")
i<-7
nr       <- match(Variablen[i],colnames(x))
x        <- subset(x,is.na(x[,nr])==0)  # Zeilen mit missings in Variable werden gelöscht
#---------------------------------------#
# Compute mean etc for western Germany
#---------------------------------------#
# West
N    <- 8497      # Zahl der Gemeinden (PSUs); aus GEM2007.sav + Berlin-West
K    <- 55701259  # Zahl der 18+ Einwohner (SSUs); aus 6706109495_Allokationsprotokoll.txt
Mh_West   <- 111       # Zahl der Sample Points; aus 6706109495_Allokationsprotokoll.txt
x_West    <- subset(x,x$v5==1)
ys_West   <- as.numeric(x_West[,nr]==6)
svector=x_West$v762
Mhi_West  <- subset(x$Mi,x$v5==1)
sPSU   <- x_West$v762
Mi <- x$Mi
erg_West <- sig_hat2(ys_West,Mi,sPSU,svector,
N,K)
erg_West
rm(list=ls())
author <- "Jan-Philipp Kolb"
scriptname <- "WeightALL_C_ComputeWeights.R"
#---------------------------------------#
# Paths
#---------------------------------------#
path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/data"
r.path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/Rcode/rcodePaper"
#---------------------------------------#
# Read data
#---------------------------------------#
setwd(path)
load("ALLBUSweights.RData")
#---------------------------------------#
# Read functions
#---------------------------------------#
setwd(r.path)
source("WeightALL_B_functions.R")
source("WeightALL_B1_sighat.R")
#---------------------------------------#
# Choose one variable
#---------------------------------------#
Descr <- c("Abitur","Alter","Bundesland","1=deutsch; 0 sonst","AUSLAENDER: MEHR LEBENSSTILANPASSUNG 0,...,7",
"AUSLAENDER: SOLLTEN UNTER SICH HEIRATEN  0,...,7","ALLGEMEINER SCHULABSCHLUSS 1,...,7")
Variablen <- c("abitur","v301","v975","deutsch","v318","v321","v327")
i<-7
nr       <- match(Variablen[i],colnames(x))
x        <- subset(x,is.na(x[,nr])==0)  # Zeilen mit missings in Variable werden gelöscht
#---------------------------------------#
# Compute mean etc for western Germany
#---------------------------------------#
# West
N    <- 8497      # Zahl der Gemeinden (PSUs); aus GEM2007.sav + Berlin-West
K    <- 55701259  # Zahl der 18+ Einwohner (SSUs); aus 6706109495_Allokationsprotokoll.txt
Mh_West   <- 111       # Zahl der Sample Points; aus 6706109495_Allokationsprotokoll.txt
x_West    <- subset(x,x$v5==1)
ys_West   <- as.numeric(x_West[,nr]==6)
svector=x_West$v762
sPSU   <- x_West$v762
# Mhi_West  <- subset(x$Mi,x$v5==1)
Mi <- x$Mi
erg_West <- sig_hat2(ys_West,Mi,sPSU,svector,
N,K)
erg_West
rm(list=ls())
author <- "Jan-Philipp Kolb"
scriptname <- "WeightALL_C_ComputeWeights.R"
#---------------------------------------#
# Paths
#---------------------------------------#
path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/data"
r.path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/Rcode/rcodePaper"
#---------------------------------------#
# Read data
#---------------------------------------#
setwd(path)
load("ALLBUSweights.RData")
#---------------------------------------#
# Read functions
#---------------------------------------#
setwd(r.path)
source("WeightALL_B_functions.R")
source("WeightALL_B1_sighat.R")
#---------------------------------------#
# Choose one variable
#---------------------------------------#
Descr <- c("Abitur","Alter","Bundesland","1=deutsch; 0 sonst","AUSLAENDER: MEHR LEBENSSTILANPASSUNG 0,...,7",
"AUSLAENDER: SOLLTEN UNTER SICH HEIRATEN  0,...,7","ALLGEMEINER SCHULABSCHLUSS 1,...,7")
Variablen <- c("abitur","v301","v975","deutsch","v318","v321","v327")
i<-7
nr       <- match(Variablen[i],colnames(x))
x        <- subset(x,is.na(x[,nr])==0)  # Zeilen mit missings in Variable werden gelöscht
#---------------------------------------#
# Compute mean etc for western Germany
#---------------------------------------#
# West
N    <- 8497      # Zahl der Gemeinden (PSUs); aus GEM2007.sav + Berlin-West
K    <- 55701259  # Zahl der 18+ Einwohner (SSUs); aus 6706109495_Allokationsprotokoll.txt
Mh_West   <- 111       # Zahl der Sample Points; aus 6706109495_Allokationsprotokoll.txt
x_West    <- subset(x,x$v5==1)
ys_West   <- as.numeric(x_West[,nr]==6)
sPSU   <- x_West$v762
Mi <- x$Mi
erg_West <- sig_hat2(ys_West,Mi,sPSU,
N,K)
erg_West
#---------------------------------------#
# Generalities
#---------------------------------------#
rm(list=ls())
author <- "Jan-Philipp Kolb"
scriptname <- "WeightALL_C_ComputeWeights.R"
#---------------------------------------#
# Paths
#---------------------------------------#
path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/data"
r.path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/Rcode/rcodePaper"
#---------------------------------------#
# Read data
#---------------------------------------#
setwd(path)
load("ALLBUSweights.RData")
#---------------------------------------#
# Read functions
#---------------------------------------#
setwd(r.path)
source("WeightALL_B_functions.R")
source("WeightALL_B1_sighat.R")
#---------------------------------------#
# Choose one variable
#---------------------------------------#
Descr <- c("Abitur","Alter","Bundesland","1=deutsch; 0 sonst","AUSLAENDER: MEHR LEBENSSTILANPASSUNG 0,...,7",
"AUSLAENDER: SOLLTEN UNTER SICH HEIRATEN  0,...,7","ALLGEMEINER SCHULABSCHLUSS 1,...,7")
Variablen <- c("abitur","v301","v975","deutsch","v318","v321","v327")
i<-7
nr       <- match(Variablen[i],colnames(x))
x        <- subset(x,is.na(x[,nr])==0)  # Zeilen mit missings in Variable werden gelöscht
#---------------------------------------#
# Compute mean etc for western Germany
#---------------------------------------#
# West
N_West    <- 8497      # Zahl der Gemeinden (PSUs); aus GEM2007.sav + Berlin-West
K_West    <- 55701259  # Zahl der 18+ Einwohner (SSUs); aus 6706109495_Allokationsprotokoll.txt
Mh_West   <- 111       # Zahl der Sample Points; aus 6706109495_Allokationsprotokoll.txt
x_West    <- subset(x,x$v5==1)
ys_West   <- as.numeric(x_West[,nr]==6)
erg_West <- sig_hat2(ys=ys_West,
Mi=x$Mi,
sPSU=x_West$v762,
N_West,K_West)
erg_West
#---------------------------------------#
# Generalities
#---------------------------------------#
rm(list=ls())
author <- "Jan-Philipp Kolb"
scriptname <- "WeightALL_C_ComputeWeights.R"
#---------------------------------------#
# Paths
#---------------------------------------#
path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/data"
r.path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/Rcode/rcodePaper"
#---------------------------------------#
# Read data
#---------------------------------------#
setwd(path)
load("ALLBUSweights.RData")
#---------------------------------------#
# Read functions
#---------------------------------------#
setwd(r.path)
source("WeightALL_B_functions.R")
source("WeightALL_B1_sighat.R")
#---------------------------------------#
# Choose one variable
#---------------------------------------#
Descr <- c("Abitur","Alter","Bundesland","1=deutsch; 0 sonst","AUSLAENDER: MEHR LEBENSSTILANPASSUNG 0,...,7",
"AUSLAENDER: SOLLTEN UNTER SICH HEIRATEN  0,...,7","ALLGEMEINER SCHULABSCHLUSS 1,...,7")
Variablen <- c("abitur","v301","v975","deutsch","v318","v321","v327")
i<-7
nr       <- match(Variablen[i],colnames(x))
x        <- subset(x,is.na(x[,nr])==0)  # Zeilen mit missings in Variable werden gelöscht
#---------------------------------------#
# Compute mean etc for western Germany
#---------------------------------------#
# West
N_West    <- 8497      # Zahl der Gemeinden (PSUs); aus GEM2007.sav + Berlin-West
K_West    <- 55701259  # Zahl der 18+ Einwohner (SSUs); aus 6706109495_Allokationsprotokoll.txt
Mh_West   <- 111       # Zahl der Sample Points; aus 6706109495_Allokationsprotokoll.txt
x_West    <- subset(x,x$v5==1)
ys_West   <- as.numeric(x_West[,nr]==6)
erg_West <- sig_hat2(ys=ys_West,
Mi=x$Mi,
sPSU=x_West$v762,
N_West,K_West)
erg_West
#---------------------------------------#
# Survey Weighting with ALLBUS data
# Jan-Philipp Kolb und Siegfried Gabler
# Mon Jun 29 10:38:12 2015
#---------------------------------------#
#---------------------------------------#
# Generalities
#---------------------------------------#
rm(list=ls())
author <- "Jan-Philipp Kolb"
scriptname <- "WeightALL_C_ComputeWeights.R"
#---------------------------------------#
# Paths
#---------------------------------------#
path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/data"
r.path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/Rcode/rcodePaper"
#---------------------------------------#
# Read data
#---------------------------------------#
setwd(path)
load("ALLBUSweights.RData")
#---------------------------------------#
# Read functions
#---------------------------------------#
setwd(r.path)
source("WeightALL_B_functions.R")
source("WeightALL_B1_sighat.R")
#---------------------------------------#
# Choose one variable
#---------------------------------------#
Descr <- c("Abitur","Alter","Bundesland","1=deutsch; 0 sonst","AUSLAENDER: MEHR LEBENSSTILANPASSUNG 0,...,7",
"AUSLAENDER: SOLLTEN UNTER SICH HEIRATEN  0,...,7","ALLGEMEINER SCHULABSCHLUSS 1,...,7")
Variablen <- c("abitur","v301","v975","deutsch","v318","v321","v327")
i<-7
nr       <- match(Variablen[i],colnames(x))
x        <- subset(x,is.na(x[,nr])==0)  # Zeilen mit missings in Variable werden gelöscht
#---------------------------------------#
# Compute mean etc for western Germany
#---------------------------------------#
# West
N_West    <- 8497      # Zahl der Gemeinden (PSUs); aus GEM2007.sav + Berlin-West
K_West    <- 55701259  # Zahl der 18+ Einwohner (SSUs); aus 6706109495_Allokationsprotokoll.txt
Mh_West   <- 111       # Zahl der Sample Points; aus 6706109495_Allokationsprotokoll.txt
x_West    <- subset(x,x$v5==1)
ys_West   <- as.numeric(x_West[,nr]==6)
erg_West <- sig_hat2(ys=ys_West,
Mi=x$Mi,
sPSU=x_West$v762,
N_West,K_West)
erg_West
#---------------------------------------#
# Survey Weighting with ALLBUS data
# Jan-Philipp Kolb und Siegfried Gabler
# Mon Jun 29 10:38:12 2015
#---------------------------------------#
#---------------------------------------#
# Generalities
#---------------------------------------#
rm(list=ls())
author <- "Jan-Philipp Kolb"
scriptname <- "WeightALL_C_ComputeWeights.R"
#---------------------------------------#
# Paths
#---------------------------------------#
path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/data"
r.path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/Rcode/rcodePaper"
#---------------------------------------#
# Read data
#---------------------------------------#
setwd(path)
load("ALLBUSweights.RData")
#---------------------------------------#
# Read functions
#---------------------------------------#
setwd(r.path)
source("WeightALL_B_functions.R")
source("WeightALL_B1_sighat.R")
#---------------------------------------#
# Choose one variable
#---------------------------------------#
Descr <- c("Abitur","Alter","Bundesland","1=deutsch; 0 sonst","AUSLAENDER: MEHR LEBENSSTILANPASSUNG 0,...,7",
"AUSLAENDER: SOLLTEN UNTER SICH HEIRATEN  0,...,7","ALLGEMEINER SCHULABSCHLUSS 1,...,7")
Variablen <- c("abitur","v301","v975","deutsch","v318","v321","v327")
i<-7
nr       <- match(Variablen[i],colnames(x))
x        <- subset(x,is.na(x[,nr])==0)  # Zeilen mit missings in Variable werden gelöscht
#---------------------------------------#
# Compute mean etc for western Germany
#---------------------------------------#
# West
N_West    <- 8497      # Zahl der Gemeinden (PSUs); aus GEM2007.sav + Berlin-West
K_West    <- 55701259  # Zahl der 18+ Einwohner (SSUs); aus 6706109495_Allokationsprotokoll.txt
Mh_West   <- 111       # Zahl der Sample Points; aus 6706109495_Allokationsprotokoll.txt
x_West    <- subset(x,x$v5==1)
ys_West   <- as.numeric(x_West[,nr]==6)
erg_West <- sig_hat2(ys=ys_West,
Mi=x$Mi,
PSU=x_West$PSU,
sPSU=x_West$v762,
N_West,K_West)
erg_West
#---------------------------------------#
# Survey Weighting with ALLBUS data
# Jan-Philipp Kolb und Siegfried Gabler
# Mon Jun 29 10:38:12 2015
#---------------------------------------#
#---------------------------------------#
# Generalities
#---------------------------------------#
rm(list=ls())
author <- "Jan-Philipp Kolb"
scriptname <- "WeightALL_C_ComputeWeights.R"
#---------------------------------------#
# Paths
#---------------------------------------#
path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/data"
r.path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/Rcode/rcodePaper"
#---------------------------------------#
# Read data
#---------------------------------------#
setwd(path)
load("ALLBUSweights.RData")
#---------------------------------------#
# Read functions
#---------------------------------------#
setwd(r.path)
source("WeightALL_B_functions.R")
source("WeightALL_B1_sighat.R")
#---------------------------------------#
# Choose one variable
#---------------------------------------#
Descr <- c("Abitur","Alter","Bundesland","1=deutsch; 0 sonst","AUSLAENDER: MEHR LEBENSSTILANPASSUNG 0,...,7",
"AUSLAENDER: SOLLTEN UNTER SICH HEIRATEN  0,...,7","ALLGEMEINER SCHULABSCHLUSS 1,...,7")
Variablen <- c("abitur","v301","v975","deutsch","v318","v321","v327")
i<-7
nr       <- match(Variablen[i],colnames(x))
x        <- subset(x,is.na(x[,nr])==0)  # Zeilen mit missings in Variable werden gelöscht
#---------------------------------------#
# Compute mean etc for western Germany
#---------------------------------------#
# West
N_West    <- 8497      # Zahl der Gemeinden (PSUs); aus GEM2007.sav + Berlin-West
K_West    <- 55701259  # Zahl der 18+ Einwohner (SSUs); aus 6706109495_Allokationsprotokoll.txt
Mh_West   <- 111       # Zahl der Sample Points; aus 6706109495_Allokationsprotokoll.txt
x_West    <- subset(x,x$v5==1)
ys_West   <- as.numeric(x_West[,nr]==6)
erg_West <- sig_hat2(ys=ys_West,
Mi=x$Mi,
PSU=x_West$PSU,
sPSU=x_West$v762,
N_West,K_West)
erg_West
length(Mi)
#---------------------------------------#
# Survey Weighting with ALLBUS data
# Jan-Philipp Kolb und Siegfried Gabler
# Mon Jun 29 10:38:12 2015
#---------------------------------------#
#---------------------------------------#
# Generalities
#---------------------------------------#
rm(list=ls())
author <- "Jan-Philipp Kolb"
scriptname <- "WeightALL_C_ComputeWeights.R"
#---------------------------------------#
# Paths
#---------------------------------------#
path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/data"
r.path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/Rcode/rcodePaper"
#---------------------------------------#
# Read data
#---------------------------------------#
setwd(path)
load("ALLBUSweights.RData")
#---------------------------------------#
# Read functions
#---------------------------------------#
setwd(r.path)
source("WeightALL_B_functions.R")
source("WeightALL_B1_sighat.R")
#---------------------------------------#
# Choose one variable
#---------------------------------------#
Descr <- c("Abitur","Alter","Bundesland","1=deutsch; 0 sonst","AUSLAENDER: MEHR LEBENSSTILANPASSUNG 0,...,7",
"AUSLAENDER: SOLLTEN UNTER SICH HEIRATEN  0,...,7","ALLGEMEINER SCHULABSCHLUSS 1,...,7")
Variablen <- c("abitur","v301","v975","deutsch","v318","v321","v327")
i<-7
nr       <- match(Variablen[i],colnames(x))
x        <- subset(x,is.na(x[,nr])==0)  # Zeilen mit missings in Variable werden gelöscht
#---------------------------------------#
# Compute mean etc for western Germany
#---------------------------------------#
# West
N_West    <- 8497      # Zahl der Gemeinden (PSUs); aus GEM2007.sav + Berlin-West
K_West    <- 55701259  # Zahl der 18+ Einwohner (SSUs); aus 6706109495_Allokationsprotokoll.txt
Mh_West   <- 111       # Zahl der Sample Points; aus 6706109495_Allokationsprotokoll.txt
x_West    <- subset(x,x$v5==1)
ys_West   <- as.numeric(x_West[,nr]==6)
erg_West <- sig_hat2(ys=ys_West,
Mi=x_West$Mi,
PSU=x_West$PSU,
sPSU=x_West$v762,
N_West,K_West)
erg_West
summary(x_West$Mi)
summary(x_West$PSU)
table(x_West$PSU)
#---------------------------------------#
# Survey Weighting with ALLBUS data
# Jan-Philipp Kolb und Siegfried Gabler
# Mon Jun 29 10:38:12 2015
#---------------------------------------#
#---------------------------------------#
# Generalities
#---------------------------------------#
rm(list=ls())
author <- "Jan-Philipp Kolb"
scriptname <- "WeightALL_C_ComputeWeights.R"
#---------------------------------------#
# Paths
#---------------------------------------#
path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/data"
r.path <- "J:/Work/Statistik/Kolb/Paper/Gewichtung/Rcode/rcodePaper"
#---------------------------------------#
# Read data
#---------------------------------------#
setwd(path)
load("ALLBUSweights.RData")
#---------------------------------------#
# Read functions
#---------------------------------------#
setwd(r.path)
source("WeightALL_B_functions.R")
# source("WeightALL_B1_sighat.R")
#---------------------------------------#
# Choose one variable
#---------------------------------------#
Descr <- c("Abitur","Alter","Bundesland","1=deutsch; 0 sonst","AUSLAENDER: MEHR LEBENSSTILANPASSUNG 0,...,7",
"AUSLAENDER: SOLLTEN UNTER SICH HEIRATEN  0,...,7","ALLGEMEINER SCHULABSCHLUSS 1,...,7")
Variablen <- c("abitur","v301","v975","deutsch","v318","v321","v327")
i<-7
nr       <- match(Variablen[i],colnames(x))
x        <- subset(x,is.na(x[,nr])==0)  # Zeilen mit missings in Variable werden gelöscht
#---------------------------------------#
# Compute mean etc for western Germany
#---------------------------------------#
# West
N_West    <- 8497      # Zahl der Gemeinden (PSUs); aus GEM2007.sav + Berlin-West
K_West    <- 55701259  # Zahl der 18+ Einwohner (SSUs); aus 6706109495_Allokationsprotokoll.txt
Mh_West   <- 111       # Zahl der Sample Points; aus 6706109495_Allokationsprotokoll.txt
x_West    <- subset(x,x$v5==1)
ys_West   <- as.numeric(x_West[,nr]==6)
erg_West <- sig_hat(ys=ys_West,
Mi=x_West$Mi,
PSU=x_West$PSU,
sPSU=x_West$v762,
N_West,K_West)
erg_West
library(xtable) # to produce a LaTeX table
xtable(erg_West)
x_West[,nr]
table(x_West[,nr])
tab_lev <- table(x_West[,nr])
data.frame(Variable=Variablen[j],
Level=names(tab_lev),
"Estimator mean"=NA)
j<-1
j<-7
data.frame(Variable=Variablen[j],
Level=names(tab_lev),
"Estimator mean"=NA)
data.frame(Variable=Variablen[j],
Level=names(tab_lev),
Estimator.mean=NA,
Variance estimator=NA,
Estimator.for.sigma.2=NA,
Sampling.variance=NA
)
erg_West <- data.frame(Variable=Variablen[j],
Level=names(tab_lev),
Estimator.mean=NA,
Variance.estimator=NA,
Estimator.for.sigma.2=NA,
Sampling.variance=NA
)
erg_West
for (i in 1:length(tab_lev)){
ys_West   <- as.numeric(x_West[,nr]==names(tab_lev)[i])
erg_West[i,3:6] <- sig_hat(ys=ys_West,
Mi=x_West$Mi,
PSU=x_West$PSU,
sPSU=x_West$v762,
N_West,K_West)
}
erg_West
xtable(erg_West)
