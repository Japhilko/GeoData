{
    "contents" : "##############################################################\n# Geocoding KiTas\n# \n# Jan-Philipp Kolb\n# 28.11.2014\n#\n# Datenanalyse Entfernungen\n#\n##############################################################\n\n\n#-----------------------------------------------------------#\n# Bibliotheken\n#-----------------------------------------------------------##\n\nlibrary(foreign)\nlibrary(lattice)\nlibrary(tabplot)\n\n#-----------------------------------------------------------#\n# Pfade angeben\n#-----------------------------------------------------------##\n\nmain.path <- \"H:/Forschung/Georeferenzierung/KiTasEntfernungen/\"\n\ndata.path2 <- paste(main.path,\"data\",sep=\"\")\n\n\ndata.path <- \"D:/Daten/GeoDaten/\"\n\nGeoKG.path <- paste(data.path,\"GeoKG/\",sep=\"\")\nGeoData.path <- paste(main.path,\"data/KGdata_stepbystep/\",sep=\"\")\n\ngraph.path <- \"J:/Work/Statistik/Kolb/Paper/KiTa_Entfernungen/LaTeX/figure\"\n\n#-----------------------------------------------------------#\n# Daten einlesen\n#-----------------------------------------------------------##\n\nsetwd(data.path2)\n\n  # Entfernungen einlesen\n  # so wie ich sie an Nicole Biedinger geschickt habe\n  # EntfData2.dta am 02.09.2013\n\nEntf <- read.dta(\"EntfData2.dta\")\n\n  # Kinder Datensatz\n(load(\"eulev08.RData\"))\n\nsetwd(GeoData.path)\n(load(\"GeoKG_KIdat_V3.RData\"))\n\n#-----------------------------------------------------------#\n# Daten vorbereiten\n#-----------------------------------------------------------##\n\nKIdat3 <- KIdat\n\nind <- match(Entf$ID,Dat$aidnr)\n\nindEntf <- match(KIdat3$Identifikation,EntfData$ID)\n\nEntfernung <- EntfData$Entf[indEntf]\nEntfernung2 <- Entf$Entf[ind]\n\n#-----------------------------------------------------------#\n# Barplot Entfernungen\n#-----------------------------------------------------------##\n\n\nx_i <- seq(from=100,to=2000,by=100)\n\nx_i_e <- vector()\nfor(i in 1:length(x_i)){\n  x_i_e[i] <- table(Entfernung<x_i[i])[2]  \n}\n\nnames(x_i_e) <- x_i\n\nbarplot(x_i_e,col=\"royalblue\")\n\nsetwd(graph.path)\npng(\"GeoKG_Entfernungsklassen.png\")\nbarchart(x_i_e,xlab=\"Anzahl\",ylab=\"Entfernung in Metern\",col=\"royalblue\")\ndev.off()\n\nx_i_e2 <- c(x_i_e,sum(Entfernung>2000,na.rm=T),sum(is.na(Entfernung)))\nnames(x_i_e2) <- c(x_i,\"weiter\",\"NAs\")\n\nFarben <- c(rep(\"royalblue\",length(x_i)),\"chocolate1\",\"green\")\n\npng(\"GeoKG_EntfernungsklassenV2.png\")\nbarchart(x_i_e2,xlab=\"Anzahl\",ylab=\"Entfernung in Metern\",\n         col=Farben)\ndev.off()\n\n\nmyscales <- list(cex=1.8)\nsetwd(graph.path)\npdf(\"GeoKG_EntfernungsklassenV3.pdf\")\nbarchart(x_i_e2,xlab=list(\"Anzahl\",cex=1.8),\n         ylab=list(\"Entfernung in Metern\",cex=1.8),\n         col=Farben,scales=myscales)\ndev.off()\n\n#-----------------------------------------------------------#\n# Barplot Entfernungen - nach Subgruppen\n#-----------------------------------------------------------##\n\nx_i2 <- c(0,x_i,600000)\n\nbrEntf <- cut(Entfernung2,breaks=x_i2)\n\ngrDat <- data.frame(Entfernung=Entfernung2,MigHintergrund=Dat$tuerk)\n\n\nsetwd(graph.path)\npng(\"tableplot_KGEntfMig.png\")\ntableplot(grDat)\ndev.off()\n\ngrDat <- data.frame(Entfernung=Entfernung2,MigHintergrund=Dat$tuerk,Beruf=Dat$aberuf1v)\n\nsetwd(graph.path)\npng(\"tableplot_KGEntfMigBeruf.png\")\ntableplot(grDat)\ndev.off()\n\n\n#-----------------------------------------------------------#\n# Links\n#-----------------------------------------------------------##\n\n####\n# Barplots\n\n# http://www.statmethods.net/graphs/bar.html\n# http://www.r-bloggers.com/r-barplot-with-absolute-and-relative-values/\n\n  # barplot mit ggplot2\n\n# http://www.r-bloggers.com/ggplot2-cheatsheet-for-barplots/\n# http://www.r-bloggers.com/using-r-barplot-with-ggplot2/\n",
    "created" : 1435736572046.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3238371240",
    "id" : "EC468D5",
    "lastKnownWriteTime" : 1417519594,
    "path" : "J:/Work/Statistik/Kolb/Paper/KiTa_Entfernungen/rcode/KiGa/GeoKG_F_Geocoding.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "type" : "r_source"
}