{
    "contents" : "#---------------------------------------#\n# Survey Weighting with ALLBUS data\n# Jan-Philipp Kolb und Siegfried Gabler\n# Mon Jun 29 10:38:12 2015\n#---------------------------------------#\n\n#---------------------------------------#\n# Generalities\n#---------------------------------------#\n\nauthor <- \"Jan-Philipp Kolb\"\nscriptname <- \"WeightALL_C_ComputeWeights.R\"\n\n#---------------------------------------#\n# libraries\n#---------------------------------------#\n\nlibrary(xtable) # to produce a LaTeX table\n\n#---------------------------------------#\n# Paths\n#---------------------------------------#\n\npath <- \"J:/Work/Statistik/Kolb/Paper/Gewichtung/data\"\nr.path <- \"J:/Work/Statistik/Kolb/Paper/Gewichtung/Rcode/rcodePaper\"\n\n#---------------------------------------#\n# Read data\n#---------------------------------------#\n\nsetwd(path)\nload(\"ALLBUSweights.RData\")\n\n#---------------------------------------#\n# Read functions\n#---------------------------------------#\n\nsetwd(r.path)\nsource(\"WeightALL_B_functions.R\")\n\n#---------------------------------------#\n# Choose one variable\n#---------------------------------------#\n\n\nDescr <- c(\"Abitur\",\"Alter\",\"Bundesland\",\"1=deutsch; 0 sonst\",\"AUSLAENDER: MEHR LEBENSSTILANPASSUNG 0,...,7\",\n           \"AUSLAENDER: SOLLTEN UNTER SICH HEIRATEN  0,...,7\",\"ALLGEMEINER SCHULABSCHLUSS 1,...,7\")\nVariablen <- c(\"abitur\",\"v301\",\"v975\",\"deutsch\",\"v318\",\"v321\",\"v327\")\n\nj<-7\n\nnr       <- match(Variablen[j],colnames(x))\nx        <- subset(x,is.na(x[,nr])==0)  # Zeilen mit missings in Variable werden gelÃ¶scht\n\n#---------------------------------------#\n# Compute mean etc for western Germany\n#---------------------------------------#\n\n# West\nN_West    <- 8497      # Zahl der Gemeinden (PSUs); aus GEM2007.sav + Berlin-West\nK_West    <- 55701259  # Zahl der 18+ Einwohner (SSUs); aus 6706109495_Allokationsprotokoll.txt\nMh_West   <- 111       # Zahl der Sample Points; aus 6706109495_Allokationsprotokoll.txt\n\n\nx_West    <- subset(x,x$v5==1)\ntab_lev <- table(x_West[,nr])\n\nerg_West <- data.frame(Variable=Variablen[j],\n             Level=names(tab_lev),\n           Estimator.mean=NA,\n           Variance.estimator=NA,\n           Estimator.for.sigma.2=NA,\n           Sampling.variance=NA\n           )\n\nfor (i in 1:length(tab_lev)){\n  ys_West   <- as.numeric(x_West[,nr]==names(tab_lev)[i])\n\n  erg_West[i,3:6] <- sig_hat(ys=ys_West,\n                      Mi=x_West$Mi,\n                      PSU=x_West$PSU,\n                      sPSU=x_West$v762,\n                      N_West,K_West)\n}\n\n#---------------------------------------#\n# Produce a table\n#---------------------------------------#\n\n\nxtable(erg_West)\n",
    "created" : 1435573236166.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1981523257",
    "id" : "58825E9F",
    "lastKnownWriteTime" : 1435578575,
    "path" : "J:/Work/Statistik/Kolb/Paper/Gewichtung/Rcode/rcodePaper/WeightALL_C_ComputeWeights.R",
    "project_path" : null,
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "type" : "r_source"
}