{
    "contents" : "#-------------------------------#\n# Use OSM data - make pictures\n# Jan-Philipp Kolb\n# Mon Jul 20 07:41:53 2015\n#-------------------------------#\n\n\n#-------------------------------#\n# Libraries\n#-------------------------------#\n\n\nlibrary(XML)\nlibrary(geosmdata2)\nlibrary(ggmap)\n\n#-------------------------------#\n# Paths\n#-------------------------------#\n\nmain.path <- \"J:/Work/Statistik/Kolb/Paper/UseOSMdata/\"\ndata.path <- paste(main.path,\"data/XML/\",sep=\"\")\ngraph.path <- paste(main.path,\"figure/\",sep=\"\")\n\n#-------------------------------#\n# Read data\n#-------------------------------#\n\nsetwd(data.path)\nplace <- \"Mannheim\"\nobj <- \"bakery\"\n\nxml1 <- xmlParse(paste(place,\"_\",obj,\".xml\",sep=\"\"))\n\n#-------------------------------#\n# Get map\n#-------------------------------#\n\nImap <- qmap(location = place, zoom = 14, maptype=\"toner\",source=\"stamen\")\n\ninfo <- extract_info_op(xml1,obj)\n\nsetwd(graph.path)\npng(paste(\"ggmap_\",place,\"_\",obj,\".png\",sep=\"\"))\nImap + geom_point(aes(x = lon, y = lat,col=amenity),\n                         data = info)\ndev.off()\n\n# ggmap_Feudenheim_bakery.png\n\n#-------------------------------#\n# Plot additional information\n#-------------------------------#\n\ninfo$info_av <- apply(info,1,function(x)sum(!is.na(x)))\n\nsetwd(graph.path)\npng(paste(\"ggmap_\",place,\"_\",obj,\"2.png\",sep=\"\"))\nImap + geom_point(aes(x = lon, y = lat,col=amenity,size=info_av),\n                  data = info)\ndev.off()\n# ggmap_Feudenheim_bakery2.png\n\n#-------------------------------#\n# Plot 2d density\n#-------------------------------#\n\nImap <- qmap(location = place, zoom = 12, maptype=\"toner\",source=\"stamen\")\n\nsetwd(graph.path)\npng(paste(\"geom_density2d_\",place,\"_\",obj,\".png\",sep=\"\"))\nImap + geom_density2d(data = info, aes(x = lon, y = lat),lwd=1.5)\ndev.off()\n\n#-------------------------------#\n# Links\n#-------------------------------#\n\n# http://stackoverflow.com/questions/25847188/geographical-heat-map-of-a-custom-property-in-r-with-ggmap\n\n# http://stat405.had.co.nz/ggmap.pdf\n",
    "created" : 1437480091360.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "413056892",
    "id" : "9C5DAD1C",
    "lastKnownWriteTime" : 1437563446,
    "path" : "J:/Work/Statistik/Kolb/Paper/UseOSMdata/rcode/rOSM_Q_makePictures.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "type" : "r_source"
}