{
    "contents" : "# https://r-forge.r-project.org/scm/viewvc.php/pkg/osmar/R/?root=osmar\n\n\n# as_osmar\n\nfunction (xml)\n{\n  osm_parsed <- osm_parse(xmlRoot(xml))\n  osm_data <- extract_data(osm_parsed)\n  osm_attr <- extract_attr(osm_parsed)\n  osm_ref <- extract_ref(osm_parsed)\n  osmar <- list()\n  osmar$nodes <- osmar_elemclass(list(attrs = osm_attr$nodeattr,\n                                      tags = osm_data$nodedata), NODES_CLASS)\n  osmar$ways <- osmar_elemclass(list(attrs = osm_attr$wayattr,\n                                     tags = osm_data$waydata, refs = osm_ref$wayref), WAYS_CLASS)\n  osmar$relations <- osmar_elemclass(list(attrs = osm_attr$relationattr,\n                                          tags = osm_data$relationdata, refs = osm_ref$relationref),\n                                     RELATIONS_CLASS)\n  osmar_class(osmar)\n}\n\n\n# osmar:::osm_parse\n\nfunction (x)\n{\n  stopifnot(class(x) %in% c(\"XMLInternalElementNode\", \"XMLInternalNode\",\n                            \"XMLAbstractNode\"))\n  osm <- list()\n  osm$nodes <- element_parse(x, \"node\")\n  osm$ways <- element_parse(x, \"way\")\n  osm$relations <- element_parse(x, \"relation\")\n  subclass(osm, \"osm_parsed\")\n}\n<environment: namespace:osmar>\n\n\n# osmar:::as_sp_lines\n\n  function (obj, crs = osm_crs())\n  {\n    fullcheck <- has_data(obj)\n    if (!fullcheck[\"nodes\"]) {\n      warning(\"no nodes\")\n      return(NULL)\n    }\n    if (!fullcheck[\"ways\"]) {\n      warning(\"no ways\")\n      return(NULL)\n    }\n    way_ids <- unique(obj$ways$refs$id)\n    way_lns <- vector(\"list\", length(way_ids))\n    for (i in 1:length(way_lns)) {\n      way_lns[[i]] <- Lines(ways_nodes2Line(way_ids[i], obj$ways,\n                                            obj$nodes), way_ids[i])\n    }\n    if (fullcheck[3] == FALSE) {\n      return(make_SLDF(obj, way_lns, crs, \"way\"))\n    }\n    rel_ids <- unique(obj$relations$refs$id)\n    rel_lns <- vector(\"list\", length(rel_ids))\n    for (i in 1:length(rel_ids)) {\n      rel_lns[[i]] <- Lines(rels_ways_nodes2Line(rel_ids[i],\n                                                 obj$relations, obj$ways, obj$nodes), rel_ids[i])\n    }\n    ret <- make_SLDF(obj, c(way_lns, rel_lns), crs, \"relation\")\n    ret\n  }\n<environment: namespace:osmar>\n\n\n# Lines  - package sp\n\n\n# osmar:::ways_nodes2Line\n\n  function (wayID, ways, nodes)\n  {\n    nds <- ways$refs[ways$refs$id == wayID, ]$ref\n    if (length(nds) == 0) {\n      return(NULL)\n    }\n    geo <- nodes$attrs[match(nds, nodes$attrs$id), c(\"lon\", \"lat\")]\n    if (sum(is.na(geo) == TRUE) >= 1)\n      geo <- geo[!is.na(geo[, 1]), ]\n    ret <- Line(geo)\n    ret\n  }\n<environment: namespace:osmar>\n\n",
    "created" : 1437114744704.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2491401812",
    "id" : "C44E0649",
    "lastKnownWriteTime" : 1435765408,
    "path" : "J:/Work/Statistik/Kolb/Paper/UseOSMdata/rcode/rOSM_N_OSMarAnalyse.R",
    "project_path" : null,
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "type" : "r_source"
}